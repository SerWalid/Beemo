{% extends "dashboard2.html" %} {% block title %} Parent Dashboard | Settings {%
endblock %} {% block content %}
<div class="mx-4 min-h-screen max-w-screen-xl sm:mx-8">
  <h1 class="border-b py-6 text-4xl font-semibold">Settings</h1>
  <div class="grid grid-cols-8 pt-3 sm:grid-cols-10">
    <div class="relative my-4 w-56 sm:hidden">
      <input
        class="peer hidden"
        type="checkbox"
        name="select-1"
        id="select-1"
      />
      <label
        for="select-1"
        class="flex w-full cursor-pointer select-none rounded-lg border p-2 px-3 text-sm text-gray-700 ring-blue-700 peer-checked:ring"
        >Notifications
      </label>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="pointer-events-none absolute right-0 top-3 ml-auto mr-5 h-4 text-slate-700 transition peer-checked:rotate-180"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M19 9l-7 7-7-7"
        />
      </svg>
      <ul
        class="max-h-0 select-none flex-col overflow-hidden rounded-b-lg shadow-md transition-all duration-300 peer-checked:max-h-56 peer-checked:py-3"
      >
        <li
          class="cursor-pointer px-3 py-2 text-sm text-slate-600 hover:bg-blue-700 hover:text-white"
        >
          Notifications
        </li>
        <li
          class="cursor-pointer px-3 py-2 text-sm text-slate-600 hover:bg-blue-700 hover:text-white"
        >
          Team
        </li>
        <li
          class="cursor-pointer px-3 py-2 text-sm text-slate-600 hover:bg-blue-700 hover:text-white"
        >
          Others
        </li>
      </ul>
    </div>

    <div class="col-span-2 hidden sm:block">
      <ul>
        <li
          id="beemo-settings-btn"
          class="mt-5 cursor-pointer border-l-2 border-l-blue-700 px-2 py-2 font-semibold text-blue-700 transition hover:border-l-blue-700 hover:text-blue-700"
        >
          Beemo
        </li>
        <li
          id="notifications-settings-btn"
          class="mt-5 cursor-pointer border-l-2 border-transparent px-2 py-2 font-semibold transition hover:border-l-blue-700 hover:text-blue-700"
        >
          Notifications
        </li>
        <li
          id="account-settings-btn"
          class="mt-5 cursor-pointer border-l-2 border-transparent px-2 py-2 font-semibold transition hover:border-l-blue-700 hover:text-blue-700"
        >
          Account
        </li>
      </ul>
    </div>
    <form
      method="POST"
      action="{{ url_for('main.settings') }}"
      id="beemo-settings-section"
      class="col-span-8 overflow-hidden rounded-xl px-8 border settings-section"
    >
      <div class="border-b pt-4 pb-8">
        <h1 class="py-2 text-2xl font-semibold">Beemo settings</h1>
        <p class="font- text-slate-600">
          Adjust Beemo's settings to tailor its interactions to your child's
          needs.
        </p>
      </div>
      <div class="border-b pb-6">
        <div class="py-4">
          <h2 class="text-lg font-semibold leading-4 text-slate-700">
            Language
          </h2>
          <p class="font- text-slate-600 mt-2">
            Choose your prefered language.
          </p>
        </div>
        <!-- Select -->
        <select
          class="py-3 px-4 pe-9 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"
        >
          <option value="" disabled>Open this select menu</option>
          <option selected>English (UK)</option>
        </select>
        <!-- End Select -->
      </div>
      <div class="border-b pb-6">
        <div class="py-4">
          <h2 class="text-lg font-semibold leading-4 text-slate-700">
            Blocked Topics
          </h2>
          <p class="font- text-slate-600 mt-2">
            Type each topic into the input field and press Enter to add it.
            Click the "Save" button at the bottom of the page to apply your
            changes.
          </p>
        </div>
        <!-- Select -->
        <select
          multiple=""
          data-hs-select='{
"placeholder": "Select option...",
"dropdownClasses": "mt-2 z-50 w-full max-h-72 p-1 space-y-0.5 bg-white border border-gray-200 rounded-lg overflow-hidden overflow-y-auto [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-track]:bg-gray-100 [&::-webkit-scrollbar-thumb]:bg-gray-300",
"optionClasses": "py-2 px-4 w-full text-sm text-gray-800 cursor-pointer hover:bg-gray-100 rounded-lg focus:outline-none focus:bg-gray-100 hs-select-disabled:pointer-events-none hs-select-disabled:opacity-50",
"mode": "tags",
"wrapperClasses": "relative ps-0.5 pe-9 min-h-[46px] flex items-center flex-wrap text-nowrap w-full border border-gray-200 rounded-lg text-start text-sm focus:border-blue-500 focus:ring-blue-500",
"tagsItemTemplate": "<div class=\"flex flex-nowrap items-center relative z-10 bg-white border border-gray-200 rounded-full p-1 m-1 \"><div class=\"size-6 me-1\" data-icon></div><div class=\"whitespace-nowrap text-gray-800 \" data-title></div><div class=\"inline-flex shrink-0 justify-center items-center size-5 ms-2 rounded-full text-gray-800 bg-gray-200 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 text-sm cursor-pointer\" data-remove><svg class=\"shrink-0 size-3\" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M18 6 6 18\"/><path d=\"m6 6 12 12\"/></svg></div></div>",
"tagsInputClasses": "py-3 px-2 rounded-lg order-1 text-sm outline-none",
"optionTemplate": "<div class=\"flex items-center\"><div class=\"size-8 me-2\" data-icon></div><div><div class=\"text-sm font-semibold text-gray-800 \" data-title></div><div class=\"text-xs text-gray-500 \" data-description></div></div><div class=\"ms-auto\"><span class=\"hidden hs-selected:block\"><svg class=\"shrink-0 size-4 text-blue-600\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" viewBox=\"0 0 16 16\"><path d=\"M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z\"/></svg></span></div></div>",
"extraMarkup": "<div class=\"absolute top-1/2 end-3 -translate-y-1/2\"><svg class=\"shrink-0 size-3.5 text-gray-500 \" xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"m7 15 5 5 5-5\"/><path d=\"m7 9 5-5 5 5\"/></svg></div>"
}'
          class="hidden"
        >
          <option value="">Choose</option>
          {% for topic in selected_topics %}
          <option value="{{ topic.id }}" selected>{{ topic.topic }}</option>
          {% endfor %}
        </select>
        <!-- End Select -->
      </div>

      <div class="grid border-b py-6 sm:grid-cols-2">
        <div class="">
          <h2 class="text-lg font-semibold leading-4 text-slate-700">
            Sleep Time
          </h2>
          <div class="mt-4 flex gap-4 md:items-center flex-col md:flex-row">
            <select
              id="start-time"
              class="py-3 px-4 pe-9 block border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"
            >
              <option disabled selected="">Start time</option>
              <option>8:00 PM</option>
              <option>8:15 PM</option>
              <option>8:30 PM</option>
            </select>
            <span class="text-sm text-gray-500">To</span>
            <select
              id="end-time"
              class="py-3 px-4 pe-9 bloc border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"
            >
              <option disabled selected="">End time</option>
              <option>8:00 PM</option>
              <option>8:15 PM</option>
              <option>8:30 PM</option>
            </select>
          </div>
        </div>
        <div class="mt-4 flex items-center sm:justify-end">
          <div class="flex flex-col gap-3">
            <label
              for="sleep-time"
              class="relative inline-flex cursor-pointer items-center"
            >
              <input
                type="checkbox"
                value="on"
                id="sleep-time"
                class="peer sr-only"
              />
              <div
                class="peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 :ring-blue-800"
              ></div>
            </label>
          </div>
        </div>
      </div>

      <div class="grid border-b py-6 sm:grid-cols-2">
        <div class="">
          <h2 class="text-lg font-semibold leading-4 text-slate-700">
            Daily usage limit
          </h2>
          <div class="mt-4 flex gap-2 items-center">
            <input
              id="daily-usage-limit"
              type="text"
              class="py-3 px-4 block w-full border-gray-200 rounded-lg text-sm focus:border-blue-500 focus:ring-blue-500 disabled:opacity-50 disabled:pointer-events-none"
              placeholder="Set the daily usage limit for beemo"
            />
            <span class="text-large text-gray-500">minutes</span>
          </div>
        </div>
        <div class="mt-4 flex items-center sm:justify-end">
          <div class="flex flex-col gap-3">
            <label
              for="daily-usage"
              class="relative inline-flex cursor-pointer items-center"
            >
              <input
                type="checkbox"
                value="on"
                id="daily-usage-checkbox"
                class="peer sr-only"
              />
              <div
                class="peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 :ring-blue-800"
              ></div>
            </label>
          </div>
        </div>
      </div>
      <div class="grid border-b py-6">
        <div class="">
          <h2 class="text-lg font-semibold leading-4 text-slate-700">
            Learning Goals
          </h2>

          <div class="py-6 flex flex-col lg:flex-row lg:items-center">
            <div class="relative mb-6 lg:mb-0 lg:grow">
              <label for="word-goal-slider" class="sr-only"
                >New Words per Week</label
              >
              <input
                id="word-goal-slider"
                type="range"
                value="{{ word_goal | default(25) }}"
                min="1"
                max="50"
                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                oninput="updateWordGoal(this.value)"
              />
              <div
                class="flex justify-between text-sm text-gray-500 absolute start-0 -bottom-6 w-full"
              >
                <span>1 word</span>
                <span>17 words</span>
                <span>33 words</span>
                <span>50 words</span>
              </div>
            </div>
            <div class="text-center mt-2 lg:mt-0 lg:ml-4 lg:text-right">
              <span class="text-gray-700"
                >Selected Goal:
                <span id="word-goal-value">{{ word_goal | default(25) }}</span>
                new words per week</span
              >
            </div>
          </div>

          <div class="py-6 flex flex-col lg:flex-row lg:items-center">
            <div class="relative mb-6 lg:mb-0 lg:grow">
              <label for="reading-time-slider" class="sr-only"
                >Reading Time per Day</label
              >
              <input
                id="reading-time-slider"
                type="range"
                value="{{ reading_time | default(30) }}"
                min="5"
                max="120"
                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                oninput="updateReadingTime(this.value)"
              />
              <div
                class="flex justify-between text-sm text-gray-500 absolute start-0 -bottom-6 w-full"
              >
                <span>5 minutes</span>
                <span>45 minutes</span>
                <span>80 minutes</span>
                <span>120 minutes</span>
              </div>
            </div>
            <div class="text-center mt-2 lg:mt-0 lg:ml-4 lg:text-right">
              <span class="text-gray-700"
                >Selected Goal:
                <span id="reading-time-value"
                  >{{ reading_time | default(30) }}</span
                >
                minutes of reading per day</span
              >
            </div>
          </div>

          <div class="py-6 flex flex-col lg:flex-row lg:items-center">
            <div class="relative mb-6 lg:mb-0 lg:grow">
              <label for="sessions-per-week-slider" class="sr-only"
                >Interactive Sessions per Week</label
              >
              <input
                id="sessions-per-week-slider"
                type="range"
                value="{{ sessions_per_week | default(1) }}"
                min="1"
                max="14"
                class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                oninput="updateSessionsPerWeek(this.value)"
              />
              <div
                class="flex justify-between text-sm text-gray-500 absolute start-0 -bottom-6 w-full"
              >
                <span>1 session</span>
                <span>5 sessions</span>
                <span>10 sessions</span>
                <span>14 sessions</span>
              </div>
            </div>
            <div class="text-center mt-2 lg:mt-0 lg:ml-4 lg:text-right">
              <span class="text-gray-700"
                >Selected Goal:
                <span id="sessions-per-week-value"
                  >{{ sessions_per_week | default(1) }}</span
                >
                interactive sessions per week</span
              >
            </div>
          </div>
        </div>
      </div>
      <div class="flex justify-end my-2">
        <button
          type="submit"
          class="py-3 px-4 inline-flex items-center gap-x-2 text-sm font-medium rounded-lg border border-gray-200 bg-white text-gray-800 shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none"
        >
          Save
          <svg
            class="shrink-0 size-4"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="size-6"
          >
            <path
              fill-rule="evenodd"
              d="M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z"
              clip-rule="evenodd"
            />
          </svg>
        </button>
      </div>
    </form>

    <div
      id="notifications-settings-section"
      class="col-span-8 overflow-hidden rounded-xl px-8 border settings-section hidden"
    >
      <div class="border-b pt-4 pb-8">
        <h1 class="py-2 text-2xl font-semibold">Notification settings</h1>
        <p class="font- text-slate-600">
          Manage your notification preferences to stay updated on Beemo’s
          interactions and insights.
        </p>
      </div>
      <div class="grid border-b py-6 sm:grid-cols-2">
        <div class="">
          <h2 class="text-lg font-semibold leading-4 text-slate-700">
            High Emotional Engagement Notification
          </h2>
          <p class="mt-2 text-slate-600">
            Get notified when the child exhibits signs of high emotional
            engagement during interactions with Beemo.
          </p>
        </div>
        <div class="mt-4 flex items-center sm:justify-end">
          <div class="flex flex-col gap-3">
            <label
              for="email-1"
              class="relative inline-flex cursor-pointer items-center"
            >
              <input
                type="checkbox"
                value=""
                id="email-1"
                class="peer sr-only"
              />
              <div
                class="peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 :ring-blue-800"
              ></div>
              <span class="ml-3 text-sm font-medium text-gray-900">Email</span>
            </label>
            <label
              for="sms-1"
              class="relative inline-flex cursor-pointer items-center"
            >
              <input type="checkbox" value="" id="sms-1" class="peer sr-only" />
              <div
                class="peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 :ring-blue-800"
              ></div>
              <span class="ml-3 text-sm font-medium text-gray-900">SMS</span>
            </label>
          </div>
        </div>
      </div>

      <div class="grid border-b py-6 sm:grid-cols-2">
        <div class="">
          <h2 class="text-lg font-semibold leading-4 text-slate-700">
            Repetitive Questions Notification
          </h2>
          <p class="font- text-slate-600 mt-2">
            Get notified when the child repeatedly asks the same question to
            Beemo within a short period.
          </p>
        </div>
        <div class="mt-4 flex items-center sm:justify-end">
          <div class="flex flex-col gap-3">
            <label
              for="email-2"
              class="relative inline-flex cursor-pointer items-center"
            >
              <input
                type="checkbox"
                value=""
                id="email-2"
                class="peer sr-only"
              />
              <div
                class="peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 :ring-blue-800"
              ></div>
              <span class="ml-3 text-sm font-medium text-gray-900">Email</span>
            </label>
            <label
              for="sms-2"
              class="relative inline-flex cursor-pointer items-center"
            >
              <input type="checkbox" value="" id="sms-2" class="peer sr-only" />
              <div
                class="peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 :ring-blue-800"
              ></div>
              <span class="ml-3 text-sm font-medium text-gray-900">SMS</span>
            </label>
          </div>
        </div>
      </div>
      <div class="grid border-b py-6 sm:grid-cols-2">
        <div class="">
          <h2 class="text-lg font-semibold leading-4 text-slate-700">
            Agitated Behavior Detection
          </h2>
          <p class="font- text-slate-600">
            Get notified when the child displays signs of agitation or distress
            during interactions with Beemo.
          </p>
        </div>
        <div class="mt-4 flex items-center sm:justify-end">
          <div class="flex flex-col gap-3">
            <label
              for="email-3"
              class="relative inline-flex cursor-pointer items-center"
            >
              <input
                type="checkbox"
                value=""
                id="email-3"
                class="peer sr-only"
              />
              <div
                class="peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 :ring-blue-800"
              ></div>
              <span class="ml-3 text-sm font-medium text-gray-900">Email</span>
            </label>
            <label
              for="sms-3"
              class="relative inline-flex cursor-pointer items-center"
            >
              <input type="checkbox" value="" id="sms-3" class="peer sr-only" />
              <div
                class="peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:top-[2px] after:left-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 :ring-blue-800"
              ></div>
              <span class="ml-3 text-sm font-medium text-gray-900">SMS</span>
            </label>
          </div>
        </div>
      </div>
    </div>
    <div id="account-settings-section" class="settings-section hidden">
      <!-- Account settings HTML -->
    </div>
  </div>
</div>

<script>
  document
    .getElementById("beemo-settings-btn")
    .addEventListener("click", function () {
      setActiveTab("beemo-settings-btn");
      showSettingsSection("beemo-settings-section");
    });

  document
    .getElementById("notifications-settings-btn")
    .addEventListener("click", function () {
      setActiveTab("notifications-settings-btn");
      showSettingsSection("notifications-settings-section");
    });

  document
    .getElementById("account-settings-btn")
    .addEventListener("click", function () {
      setActiveTab("account-settings-btn");
      showSettingsSection("account-settings-section");
    });

  function setActiveTab(activeTabId) {
    var tabs = document.querySelectorAll("li");
    tabs.forEach(function (tab) {
      tab.classList.remove("border-l-blue-700", "text-blue-700", "border-l-2");
    });
    document
      .getElementById(activeTabId)
      .classList.add("border-l-blue-700", "text-blue-700", "border-l-2");
  }

  function showSettingsSection(sectionId) {
    var sections = document.querySelectorAll(".settings-section");
    sections.forEach(function (section) {
      section.classList.add("hidden");
    });
    document.getElementById(sectionId).classList.remove("hidden");
  }
</script>

<script>
  function updateWordGoal(value) {
    document.getElementById("word-goal-value").innerText = value;
    // You would send the new value to the server using an AJAX request or a form submission
  }

  function updateReadingTime(value) {
    document.getElementById("reading-time-value").innerText = value;
    // You would send the new value to the server using an AJAX request or a form submission
  }

  function updateSessionsPerWeek(value) {
    document.getElementById("sessions-per-week-value").innerText = value;
    // You would send the new value to the server using an AJAX request or a form submission
  }
</script>

<script>
  const sleepCheckbox = document.getElementById("sleep-time");
  const startTimeSelect = document.getElementById("start-time");
  const endTimeSelect = document.getElementById("end-time");

  sleepCheckbox.addEventListener("change", function () {
    if (this.checked) {
      startTimeSelect.disabled = false;
      endTimeSelect.disabled = false;
    } else {
      startTimeSelect.selectedIndex = 0; // Reset to default option
      endTimeSelect.selectedIndex = 0; // Reset to default option
      startTimeSelect.disabled = true;
      endTimeSelect.disabled = true;
    }
  });

  // Initial state: Disable the selects by default
  startTimeSelect.disabled = true;
  endTimeSelect.disabled = true;

  const dailyUsageCheckbox = document.getElementById("daily-usage-checkbox");
  const dailyUsageLimitInput = document.getElementById("daily-usage-limit");

  dailyUsageCheckbox.addEventListener("change", function () {
    if (this.checked) {
      dailyUsageLimitInput.disabled = false;
    } else {
      dailyUsageLimitInput.value = ""; // Clear the input field
      dailyUsageLimitInput.disabled = true;
    }
  });

  // Initial state: Disable the input field by default
  dailyUsageLimitInput.disabled = true;
</script>

{% endblock %}
